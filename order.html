<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Your ZenDoodle Book</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600&family=Quicksand:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    
    <style>
        /* --- ROBUST FORM STYLING --- */
        /* Pages are hidden by default */
        .form-page { display: none; }
        /* The 'active' class makes a page visible */
        .form-page.active { display: block; animation: fadeUp 0.4s ease-out; }
        
        @keyframes fadeUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        input, select, textarea {
            width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; 
            margin-top: 5px; margin-bottom: 15px; font-family: 'Quicksand', sans-serif; font-size: 1rem;
        }
        input:focus, select:focus, textarea:focus { border-color: var(--zen-teal); outline: none; }

        label { font-weight: 700; color: var(--zen-dark); display: block; margin-top: 10px; }

        /* Radio Card Styling */
        .radio-card {
            display: flex; align-items: center; padding: 15px; 
            border: 2px solid #eee; border-radius: 10px; margin-bottom: 10px; 
            cursor: pointer; transition: 0.2s;
        }
        .radio-card:hover { border-color: var(--zen-teal); background: #f9fdfd; }
        .radio-card input { width: 20px; height: 20px; margin: 0 15px 0 0; accent-color: var(--zen-teal); }

        /* Price Display */
        .price-box {
            background: #eef9f8; border: 2px solid var(--zen-teal); padding: 20px; 
            text-align: center; border-radius: 10px; margin: 20px 0;
        }
        .big-price { font-size: 2.5rem; font-family: 'Fredoka', sans-serif; color: var(--zen-teal); font-weight: bold; }
    </style>
</head>
<body>

    <nav>
        <a href="index.html"><img src="assets/logo.jpg" alt="ZenDoodle Logo" class="brand-logo"></a>
        <div class="nav-links">
            <a href="index.html">Home</a>
            <a href="contact.html">Contact</a>
        </div>
    </nav>

    <section class="section">
        <div class="contact-wrapper" style="max-width: 800px; margin: 0 auto;">
            
            <h1>Create your ZenDoodle Book</h1>
            <p>Bring your imagination to life with a one-of-a-kind colouring book made just for you!</p>
            <p>Whether it’s for a birthday, school, event, or personal keepsake — we’ll turn your photos, art, or theme ideas into a beautiful custom book.</p>
            <p><strong>✨ Please fill out the form below to get started.</strong></p>
            
            <div style="background: rgba(255,255,255,0.9); padding: 15px; border-radius: 10px; margin: 20px 0; border: 1px dashed var(--zen-teal); font-size: 0.9rem;">
                If you don't see an option that works for you, contact us at <a href="https://wa.me/18768124295" target="_blank" style="font-weight:bold; color:var(--zen-teal);">(876) 812 - 4295</a>.
            </div>

            <form id="robustForm" name="zendoodle_order" method="POST" action="thank-you.html" data-netlify="true" enctype="multipart/form-data" style="background: white; padding: 40px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); text-align: left;">
                
                <input type="hidden" name="form-name" value="zendoodle_order" />
                <input type="hidden" name="Final_Estimate" id="hidden_price">
                <textarea name="Order_Summary" id="hidden_summary" style="display:none;"></textarea>

                <div id="page_1" class="form-page active">
                    <h3>Contact Information</h3>
                    <label>Full Name *</label>
                    <input type="text" id="c_name" required>
                    
                    <label>Email Address *</label>
                    <input type="email" id="c_email" required>
                    
                    <label>Phone Number *</label>
                    <input type="tel" id="c_phone" placeholder="(876) ..." required>

                    <h3 style="margin-top: 30px;">Choose Your Book</h3>
                    <label class="radio-card">
                        <input type="radio" name="product_select" value="custom_child"> Custom Colouring Book (Child)
                    </label>
                    <label class="radio-card">
                        <input type="radio" name="product_select" value="custom_adult"> Custom Colouring Book (Adult)
                    </label>
                    <label class="radio-card">
                        <input type="radio" name="product_select" value="custom_activity"> Custom Activity Book (Child)
                    </label>
                    <label class="radio-card">
                        <input type="radio" name="product_select" value="bulk_child"> Bulk Mini Books (Child)
                    </label>
                    <label class="radio-card">
                        <input type="radio" name="product_select" value="bulk_adult"> Bulk Mini Books (Adult)
                    </label>

                    <button type="button" class="btn btn-primary" style="width:100%; margin-top:20px;" onclick="goToNextStep()">Next Step &rarr;</button>
                </div>

                <div id="page_custom_child" class="form-page">
                    <h3>Customize Child's Colouring Book</h3>
                    
                    <label>Package</label>
                    <select id="cc_pkg">
                        <option value="10pg">10 Pages ($2,500)</option>
                        <option value="20pg">20 Pages ($3,500)</option>
                        <option value="gift">Gift Package ($7,500)</option>
                    </select>

                    <label>Theme</label>
                    <select id="cc_theme">
                        <option value="Standard">Standard (Dinosaurs, Princesses, etc)</option>
                        <option value="Premium">Premium (Barbie, Spiderman, etc) +$150</option>
                    </select>

                    <label>Child's Name & Age</label>
                    <input type="text" id="cc_details">

                    <label>Upload 2 Photos</label>
                    <input type="file" name="child_photos" multiple accept="image/*">

                    <label>Turnaround</label>
                    <select id="cc_rush">
                        <option value="Standard">Standard (7 Days)</option>
                        <option value="Rush">Rush (3 Days) +$1,500</option>
                    </select>

                    <button type="button" class="btn btn-secondary" onclick="resetForm()">Back</button>
                    <button type="button" class="btn btn-primary" onclick="goToReview()">Review Price</button>
                </div>

                <div id="page_custom_adult" class="form-page">
                    <h3>Customize Adult Colouring Book</h3>
                    
                    <label>Package</label>
                    <select id="ac_pkg">
                        <option value="Standard">Standard ($3,500)</option>
                        <option value="Gift">Gift Package ($8,500)</option>
                    </select>

                    <label>Style</label>
                    <select id="ac_style">
                        <option value="Standard">Floral / Nature</option>
                        <option value="Premium">Mandala / Anime +$150</option>
                    </select>

                    <label>Details (Name, Occasion)</label>
                    <input type="text" id="ac_details">

                    <label>Upload 2 Photos</label>
                    <input type="file" name="adult_photos" multiple accept="image/*">

                    <label>Turnaround</label>
                    <select id="ac_rush">
                        <option value="Standard">Standard (7 Days)</option>
                        <option value="Rush">Rush (3 Days) +$1,500</option>
                    </select>

                    <button type="button" class="btn btn-secondary" onclick="resetForm()">Back</button>
                    <button type="button" class="btn btn-primary" onclick="goToReview()">Review Price</button>
                </div>

                <div id="page_custom_activity" class="form-page">
                    <h3>Customize Activity Book</h3>
                    
                    <label>Character Theme?</label>
                    <select id="ca_theme">
                        <option value="None">No Character ($4,500)</option>
                        <option value="Standard">Standard Character ($6,000)</option>
                        <option value="Premium">Premium Character ($6,150)</option>
                    </select>

                    <label>Add Gift Box?</label>
                    <select id="ca_gift">
                        <option value="No">No</option>
                        <option value="Yes">Yes (+$1,500)</option>
                    </select>

                    <label>Child's Name & Age</label>
                    <input type="text" id="ca_details">

                    <label>Upload 2 Photos</label>
                    <input type="file" name="activity_photos" multiple accept="image/*">

                    <label>Turnaround</label>
                    <select id="ca_rush">
                        <option value="Standard">Standard (7 Days)</option>
                        <option value="Rush">Rush (3 Days) +$1,500</option>
                    </select>

                    <button type="button" class="btn btn-secondary" onclick="resetForm()">Back</button>
                    <button type="button" class="btn btn-primary" onclick="goToReview()">Review Price</button>
                </div>

                <div id="page_bulk_child" class="form-page">
                    <h3>Bulk Mini Books (Child)</h3>
                    
                    <label>Type</label>
                    <select id="bc_type">
                        <option value="Generic">Generic (Cheaper)</option>
                        <option value="Custom">Customised (Personalised)</option>
                    </select>

                    <label>Quantity</label>
                    <select id="bc_qty">
                        <option value="8">8 Pack</option>
                        <option value="12">12 Pack</option>
                        <option value="24">24 Pack</option>
                        <option value="48">48 Pack</option>
                    </select>

                    <label>Size Upgrade?</label>
                    <select id="bc_size">
                        <option value="Standard">Standard</option>
                        <option value="Large">Large (Extra Cost)</option>
                    </select>

                    <label>Add Crayons?</label>
                    <select id="bc_crayons">
                        <option value="No">No</option>
                        <option value="Yes">Yes (Extra Cost)</option>
                    </select>

                    <label>Theme</label>
                    <select id="bc_theme">
                        <option value="Standard">Standard</option>
                        <option value="Premium">Premium (+$150)</option>
                    </select>

                    <label>Event Details</label>
                    <input type="text" id="bc_details">

                    <label>Turnaround</label>
                    <select id="bc_rush">
                        <option value="Standard">Standard (7 Days)</option>
                        <option value="Rush">Rush (3 Days) +$1,500</option>
                    </select>

                    <button type="button" class="btn btn-secondary" onclick="resetForm()">Back</button>
                    <button type="button" class="btn btn-primary" onclick="goToReview()">Review Price</button>
                </div>

                <div id="page_bulk_adult" class="form-page">
                    <h3>Bulk Mini Books (Adult)</h3>
                    
                    <label>Theme</label>
                    <select id="ba_type">
                        <option value="Mandala">Mandala</option>
                        <option value="Inspire">Inspirational (Higher Cost)</option>
                    </select>

                    <label>Quantity</label>
                    <select id="ba_qty">
                        <option value="8">8 Pack</option>
                        <option value="12">12 Pack</option>
                        <option value="24">24 Pack</option>
                        <option value="48">48 Pack</option>
                    </select>

                    <label>Size Upgrade?</label>
                    <select id="ba_size">
                        <option value="Standard">Standard</option>
                        <option value="Large">Large (Extra Cost)</option>
                    </select>

                    <label>Add Pencils?</label>
                    <select id="ba_crayons">
                        <option value="No">No</option>
                        <option value="Yes">Yes (Extra Cost)</option>
                    </select>

                    <label>Turnaround</label>
                    <select id="ba_rush">
                        <option value="Standard">Standard (7 Days)</option>
                        <option value="Rush">Rush (3 Days) +$1,500</option>
                    </select>

                    <button type="button" class="btn btn-secondary" onclick="resetForm()">Back</button>
                    <button type="button" class="btn btn-primary" onclick="goToReview()">Review Price</button>
                </div>

                <div id="page_review" class="form-page">
                    <h3>Review Your Order</h3>
                    
                    <div class="price-box">
                        Estimated Total:
                        <span class="big-price" id="display_price">$0 JMD</span>
                    </div>

                    <label>Final Notes</label>
                    <textarea id="final_notes" rows="4"></textarea>

                    <button type="button" class="btn btn-secondary" onclick="resetForm()">Start Over</button>
                    <button type="submit" class="btn btn-primary">Confirm & Send</button>
                </div>

            </form>
        </div>
    </section>

    <script>
        let selectedProduct = "";
        let finalPrice = 0;

        function goToNextStep() {
            // 1. Validate Contact Info
            const name = document.getElementById('c_name').value;
            const email = document.getElementById('c_email').value;
            const phone = document.getElementById('c_phone').value;

            if(!name || !email || !phone) {
                alert("Please fill in your Name, Email, and Phone.");
                return;
            }

            // 2. Validate Product Selection
            const radios = document.getElementsByName('product_select');
            let isChecked = false;
            for(let i=0; i<radios.length; i++) {
                if(radios[i].checked) {
                    selectedProduct = radios[i].value;
                    isChecked = true;
                }
            }

            if(!isChecked) {
                alert("Please select a book type to continue.");
                return;
            }

            // 3. Navigate
            document.querySelectorAll('.form-page').forEach(p => p.classList.remove('active'));
            
            if(selectedProduct === 'custom_child') document.getElementById('page_custom_child').classList.add('active');
            if(selectedProduct === 'custom_adult') document.getElementById('page_custom_adult').classList.add('active');
            if(selectedProduct === 'custom_activity') document.getElementById('page_custom_activity').classList.add('active');
            if(selectedProduct === 'bulk_child') document.getElementById('page_bulk_child').classList.add('active');
            if(selectedProduct === 'bulk_adult') document.getElementById('page_bulk_adult').classList.add('active');
        }

        function resetForm() {
            document.querySelectorAll('.form-page').forEach(p => p.classList.remove('active'));
            document.getElementById('page_1').classList.add('active');
        }

        function goToReview() {
            calculateTotal();
            document.querySelectorAll('.form-page').forEach(p => p.classList.remove('active'));
            document.getElementById('page_review').classList.add('active');
        }

        function calculateTotal() {
            let total = 0;

            if(selectedProduct === 'custom_child') {
                const pkg = document.getElementById('cc_pkg').value;
                if(pkg === '10pg') total = 2500;
                if(pkg === '20pg') total = 3500;
                if(pkg === 'gift') total = 7500;
                if(document.getElementById('cc_theme').value === 'Premium') total += 150;
                if(document.getElementById('cc_rush').value === 'Rush') total += 1500;
            }

            else if(selectedProduct === 'custom_adult') {
                const pkg = document.getElementById('ac_pkg').value;
                if(pkg === 'Standard') total = 3500;
                if(pkg === 'Gift') total = 8500;
                if(document.getElementById('ac_style').value === 'Premium') total += 150;
                if(document.getElementById('ac_rush').value === 'Rush') total += 1500;
            }

            else if(selectedProduct === 'custom_activity') {
                const theme = document.getElementById('ca_theme').value;
                if(theme === 'None') total = 4500;
                if(theme === 'Standard') total = 6000;
                if(theme === 'Premium') total = 6150;
                if(document.getElementById('ca_gift').value === 'Yes') total += 1500;
                if(document.getElementById('ca_rush').value === 'Rush') total += 1500;
            }

            else if(selectedProduct === 'bulk_child') {
                const type = document.getElementById('bc_type').value;